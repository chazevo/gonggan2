<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC
"-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="musicmapper">
	<resultMap type="music" id="musicResult">
		<id property="music_num" column="music_num"/>
		<result property="post_id" column="post_id"/>
		<result property="music_info" column="music_info"/>
		<result property="title" column="title"/>
		<result property="singer" column="singer"/>
		<result property="music_content" column="music_content"/>
	</resultMap>
	<select id="musiclist" resultMap="musicResult" parameterType="Map">
	
	select rownum, subquery.* from (select * from music
				order by 5 desc) subquery "
				where rownum between #{rownum} and #{rownum2}
	</select>
	<select id="musiclist_index2" resultMap="musicResult">
		SELECT * FROM ( SELECT ROWNUM AS RNUM, POST_ID, MUSIC_NUM, TITLE FROM (SELECT * FROM MUSIC ORDER BY POST_ID DESC)  )<![CDATA[ WHERE RNUM<=8]]>	
	</select>
	
	<select id="musicdetail" resultMap="music" parameterType="int">
	select * from music where post_id = #{postId}
	</select>
	
</mapper>